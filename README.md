# OldW
老王课题组 Revit开发

在基坑开挖与施工过程中的监测数据的处理与报警。

## 写在前面
这是OldW的在GitHub中的第二个版本，前面的一版由Git中同步的问题与以及Merge冲突的问题而不得不取消，因此从这时开始重新进行管理。
### 在上一版中，大致上来说，完成了如下内容：
1. 将整个解决方案的只区分C#与vb的两个Project，然后将每一位成员所编写的项目放在对应语言的Project中，然后新建一个文件夹，并用规范的命名空间来区分。
2. 将每一种监测点都按其族名称不同而创建出对应的类。
3. 创建了土体类Soil，并创建了对应的土体单元的族文件。
4. 完成了OldWApplication与OldWDocument类的基本架构设计。OldWDocument对象的基本特征为：对应的项目信息中，有一个标识性的参数：OldW_Project。同时，将OldWDocument设计为一个基类，根据不同的功能需求，派生对应的子类，比如ExcavationDoc类，即是专门用来执行基坑开挖的相关操作；
5. 实现了通过在界面中选择绘制的封闭模型线，来直接绘制模型土体或开挖土体的功能。
6. 优化了开挖土体Soil__Excav类，并成功模型开挖土体在模型土体中的开挖过程，同时，规定了开挖土体族的命名规则：开挖土体-2016/04/03-02；
7. 完成的模型土体与开挖土体族中，实体的深度与对应参数的关联；
8. 解决了Revit中绘制开挖土体（实体剪切操作）时，在Revit中会报出“无法剪切连接的图元”的报错。此报错的原因是Revit中规定了在剪切后的图元不能有任何一条边的长度小于1/32''(即0.79mm，具体说明见Revit官方帮助：http://help.autodesk.com/view/RVT/2016/CHS/?guid=GUID-DB17C879-3A44-471C-8C66-2A1CAD0A6C05)；

### 未完成的内容
1. 利用UIApplication.PostCommand实现UI界面中绘制模型线, 然后通过捕捉DocumentChanged事件来综合完成土体的轮廓绘制。
2. 后续要进行监测数据存储的完善，会考虑使用“ Autodesk.Revit.DB.ExtensibleStorage.SchemaBuilder”类，而取消使用序列到字符串的方式来保存监测数据。
3. 对于不同类型的族或者族样板，设计出相应的规范，比如族类别，命名标准等，在后续的设计中应该严格遵守。
4. 后续的工作包括：用户窗口界面设计，以及将后世博模型进行实际应用。

### 已涉及但还有待完善的工作
1. 对于项目的命名与分类进行一定的整理，但还是有待进一步完善。
2. 后面要做的工作是：对于监测测点与开挖土体的族文件，制定相应的规范，包括族样本类型、族名称、族中要有的参数等
3. 后续还要将土体的深度与对应的族参数进行关联，以实现参数化驱动。
4. 对于开挖土体族在项目中的命名问题，还有待继续完成。

##Git 分支管理
在实际开发中，我们应该按照几个基本原则进行分支管理：

首先，master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活
那在哪里干活呢？干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如2.0版本发布时，再把dev分支合并到master上，在master分支发新版本
你和你的小伙伴每个人都在dev分支上干活，每个人都有自己的分支，时不时往dev分支上合并就可以了 所以，团队合作的分支看起来就像这个样子： https://segmentfault.com/img/bVcc7H